<div class="block-header">
  <h2><%= @report.title%></h2>
</div>

<div class="card">
  <div class="listview lv-bordered lv-lg">
    <div class="lv-body">
      <div class="lv-item media form">
        <table class="table table-bordered" >
          <tbody>
            <% @report.questions.each_with_index do |question, q| %>
              <tr>
                <td rowspan="3" colspan="6" style="border: solid 1px grey">
                <strong>  <%= question.name %></strong>
                </td>
              </tr>
              <tr>
                <% question.options.each do |option|%>
                  <th style="background: lightgrey; border: solid 1px grey">
                    <%= option.text%>
                  </th>
                <% end %>
              </tr>
              <tr>
                <% question.options.each_with_index do |option, i|%>
                  <td style="border: solid 1px grey">
                    <% count_per_question = Answer.where(question_id: question.id, option_id: option.id).count.to_f%>
                    <%average= (count_per_question/Answer.where(question_id: question.id).count.to_d).round(3) * 100%>
                    <% if average < 50 %>
                      <span style="color: red"><%=average%> %</span>
                      <% elsif average==50%>
                      <%=average%>
                      <% else %>
                      <span style="color: green"><%=average%> %</span>
                    <% end %>
                  </td>
                <% end %>
              </tr>
            <%end%>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
